(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{175:function(t,e){},269:function(t,e,n){},271:function(t,e,n){},312:function(t,e){},314:function(t,e){},324:function(t,e){},326:function(t,e){},352:function(t,e){},354:function(t,e){},355:function(t,e){},361:function(t,e){},363:function(t,e){},380:function(t,e){},382:function(t,e){},394:function(t,e){},397:function(t,e){},423:function(t,e){},425:function(t,e){},447:function(t,e){},451:function(t,e){},466:function(t,e){},488:function(t){t.exports=JSON.parse('{"mnemonic":["obtain","mother","defy","still","install","upon","assume","letter","guilt","want","sight","kitten","stamp","behave","dutch"],"secret":"6c826c62cf4695f0d8110e671699d1d2865405aa","amount":"12013885745","pkh":"tz1aLMj6CXkADSH9tBtRLAcigBqUaSA3sRwx","password":"EVqrauKmQ5","email":"awnthbxb.ceblojah@tezos.example.org"}')},489:function(t,e,n){"use strict";n.r(e);var c=n(26),r=(n(269),n(15)),a=n(0),o=n.n(a),s=n(59),i=n(25),u=(n(271),n(519)),f=n(518),d=n(3),l=n.n(d),p=n(121);p.a.initializeApp({apiKey:"AIzaSyC19cZLLW3oYWjQxWEFPhdtzSOGWQcgQjQ",authDomain:"adventure-ea7cd.firebaseapp.com",databaseURL:"https://adventure-ea7cd.firebaseio.com",projectId:"adventure-ea7cd",storageBucket:"adventure-ea7cd.appspot.com",messagingSenderId:"753400311148",appId:"1:753400311148:web:f8f56db5a153280f185749"});var m,b=p.a.firestore(),h=l.a.createContext({updateDrumCount:function(){},getDrumCount:function(){return Promise.resolve(0)}}),j=function(t){var e=t.children;return Object(c.jsx)(h.Provider,{value:{updateDrumCount:function(t){b.collection("drumbeat-tezos").doc("tracking").set({drumbeatCount:p.a.firestore.FieldValue.increment(t)},{merge:!0})},getDrumCount:function(){return new Promise(function(){var t=Object(s.a)(o.a.mark((function t(e){var n,c,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=b.collection("drumbeat-tezos").doc("tracking"),t.next=3,n.get();case 3:(c=t.sent).exists?(r=c.data(),e(r.drumbeatCount)):e(0);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},children:e})},O=n(517),v=n(260),g=n.p+"static/media/drum.5ae1d20c.svg",x=n.p+"static/media/drumbeat.e0f520f5.mp3",w=n(251),k=n.n(w),y=n.p+"static/media/musical-note.49e6a279.svg",S=n(120),C=n(516),z=n(27),A=n(5),R=n(7),N=n(261),B=n(257),D=n(488),T=function(){function t(e){Object(A.a)(this,t),this.tezos=void 0,this.rpcUrl=void 0,this.tezos=new N.a(e),this.rpcUrl=e,this.tezos.setSignerProvider(B.a.fromFundraiser(D.email,D.password,D.mnemonic.join(" ")))}return Object(R.a)(t,[{key:"transfer",value:function(t,e,n,c){this.tezos.contract.at(t).then((function(t){return console.log("Sending ".concat(c," from ").concat(e," to ").concat(n,"...")),t.methods.transfer(e,n,c).send()})).then((function(t){return console.log("Awaiting for ".concat(t.hash," to be confirmed...")),t.confirmation(1).then((function(){return t.hash}))})).then((function(t){return console.log("Hash: https://granada.tzstats.com/".concat(t))})).catch((function(t){return console.log("Error: ".concat(JSON.stringify(t,null,2)))}))}}]),t}(),E=k()("wss://adventure-drumbeat.herokuapp.com",{transports:["websocket"]}),P=new z.i({name:"Beacon Docs"});var L=function(){var t=l.a.createRef(),e=l.a.createRef(),n=Object(d.useRef)(),a=Object(d.useRef)(0),p=Object(d.useState)([]),b=Object(i.a)(p,2),j=b[0],w=b[1],k=Object(d.useState)(!1),z=Object(i.a)(k,2),A=z[0],R=z[1],N=Object(d.useContext)(h),B=N.updateDrumCount,D=N.getDrumCount,L=Object(d.useState)(-1),q=Object(i.a)(L,2),M=q[0],H=q[1],K=Object(S.b)().enqueueSnackbar,U=Object(d.useState)({top:0,left:0}),Z=Object(i.a)(U,2),F=Z[0],I=Z[1],J=Object(d.useState)("sync"),V=Object(i.a)(J,2),W=V[0],X=V[1],G=Object(d.useState)(0),Q=Object(i.a)(G,2),Y=(Q[0],Q[1]),$=Object(d.useState)(!1),_=Object(i.a)($,2),tt=_[0],et=_[1],nt=Object(d.useState)(0),ct=Object(i.a)(nt,2),rt=(ct[0],ct[1]),at=Object(d.useState)(0),ot=Object(i.a)(at,2),st=ot[0],it=ot[1];Object(d.useEffect)((function(){function t(){return(t=Object(s.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.getActiveAccount();case 2:if(!(m=t.sent)){t.next=12;break}return X(m.address.slice(0,6)+"..."+m.address.slice(32,36)),t.next=7,fetch("https://api.tezos.domains/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:'\n\t\t\t\t\t\t\t  {\n\t\t\t\t\t\t\t\t  reverseRecord(address: "'+m.address+'"){owner domain{name}}\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t  ',variables:{}})}).then((function(t){return t.json()})).then((function(t){console.log(t),t.data.reverseRecord&&(e=t.data.reverseRecord.domain.name,X(e))}));case 7:et(!0),fetch("https://api.tzkt.io/v1/accounts/"+m.address).then((function(t){return t.json()})).then((function(t){return Y(t.balance)})),fetch("https://min-api.cryptocompare.com/data/price?fsym=XTZ&tsyms=USD").then((function(t){return t.json()})).then((function(t){return rt(t.USD)})),t.next=14;break;case 12:X("sync"),et(!1);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(d.useEffect)((function(){e.current&&(n.current=e.current)}));var ut=Object(d.useCallback)((function(){if(t.current){var e=t.current.getBoundingClientRect();I({top:e.top-e.height/2,left:e.left+e.width/2-25})}}),[t]);Object(d.useEffect)((function(){D().then((function(t){H(t)}))}),[D]),Object(d.useEffect)((function(){var t=function(){n.current&&(n.current.currentTime=0,n.current.play(),H((function(t){return t+1}))),w((function(t){return t.concat({key:Object(C.a)()})})),K("someone beat the drum!",{variant:"default"})};return E.on("drumbeat",t),window.addEventListener("resize",ut),function(){E.off("drumbeat",t),window.removeEventListener("resize",ut)}}),[K,ut]),Object(d.useEffect)((function(){!t.current||0!==F.top&&0!==F.left||ut()}),[t,F,ut]);var ft=Object(d.useCallback)(v.a.throttle((function(){a.current&&(B(a.current),a.current=0)}),3e3),[]);function dt(){return(dt=Object(s.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.getActiveAccount();case 2:(m=t.sent)&&P.clearActiveAccount().then(Object(s.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.getActiveAccount();case 2:m=t.sent,X("sync"),et(!1),Y(0);case 6:case"end":return t.stop()}}),t)}))));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function lt(){return pt.apply(this,arguments)}function pt(){return(pt=Object(s.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.getActiveAccount();case 2:if(!(m=t.sent)){t.next=8;break}return console.log("Already connected:",m.address),t.abrupt("return",m);case 8:return console.log("Not connected!"),t.prev=9,console.log("Requesting permissions..."),t.next=13,P.requestPermissions();case 13:e=t.sent,console.log("Got permissions:",e.address),X(e.address),console.log("reload"),window.location.reload(),et(!0),fetch("https://api.tzkt.io/v1/accounts/"+e.address).then((function(t){return t.json()})).then((function(t){return Y(t.balance)})),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(9),console.log("Got error:",t.t0);case 25:case"end":return t.stop()}}),t,null,[[9,22]])})))).apply(this,arguments)}function mt(){return bt.apply(this,arguments)}function bt(){return(bt=Object(s.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"https://granadanet.api.tez.ie","KT1VGf4ZoNMWNfBTEyBbRTX6q6TgHRnZ24zp","tz1aLMj6CXkADSH9tBtRLAcigBqUaSA3sRwx","tz2KxNHVsBwmPRgMZZKJt3mYnPMcK8Smw49g",st>0?(console.log(new T("https://granadanet.api.tez.ie").transfer("KT1VGf4ZoNMWNfBTEyBbRTX6q6TgHRnZ24zp","tz1aLMj6CXkADSH9tBtRLAcigBqUaSA3sRwx","tz2KxNHVsBwmPRgMZZKJt3mYnPMcK8Smw49g",st)),K("Recieved "+st+" DRUM !",{variant:"success"}),it(0)):K("You have nothing to claim :(",{variant:"warning"});case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.jsxs)("div",{className:"app-container",style:{minHeight:window.innerHeight-10},children:[Object(c.jsx)("audio",{src:x,ref:e,autoPlay:!0,muted:!0}),Object(c.jsx)("div",{className:"top-left",children:"drum"}),Object(c.jsx)("div",{className:"top-middle"}),M>=0&&Object(c.jsxs)("div",{className:"top-right",children:[M,"  "]}),Object(c.jsx)("img",{ref:t,onClick:function(){w((function(t){return t.concat({key:Object(C.a)()})})),R(!0),e.current&&(e.current.muted=!1,e.current.currentTime=0,e.current.play()),E.emit("drumbeat"),null!==a.current?(a.current++,ft()):a.current=0,H((function(t){return t+1})),it((function(t){return t+1}))},alt:"drum",src:g,className:"drum"}),!A&&Object(c.jsx)("div",{children:"Click the drum!"}),Object(c.jsx)(u.a,{children:j.map((function(t){return Object(c.jsx)(f.a,{timeout:1e3,classNames:"note-transition",onEntered:function(){var e=j.findIndex((function(e){return e.key===t.key}));w([].concat(Object(r.a)(j.slice(0,e)),Object(r.a)(j.slice(e+1))))},children:Object(c.jsx)("img",{alt:"music note",src:y,className:"music-note",style:{top:F.top,left:F.left}})},t.key)}))}),Object(c.jsx)("div",{className:"bottom-left",children:Object(c.jsxs)(O.a,{title:"Adventure Networks",onClick:function(){window.open("https://adventurenetworks.net/#/")},children:["Adventure ",Object(c.jsx)("br",{})," Networks "]})}),Object(c.jsxs)("div",{className:"bottom-right",children:[Object(c.jsx)("div",{className:"right",children:Object(c.jsxs)(O.a,{title:"claim",onClick:Object(s.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,mt();case 2:case"end":return t.stop()}}),t)}))),children:["  Claim ",st," DRUM  "]})}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),tt&&Object(c.jsx)(O.a,{title:"unsync",onClick:function(){!function(){dt.apply(this,arguments)}()},children:"unsync "}),"|",Object(c.jsxs)(O.a,{title:"sync",onClick:Object(s.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,lt();case 2:case"end":return t.stop()}}),t)}))),children:[W," "]})]})]})},q=n(37),M=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,521)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),c(t),r(t),a(t),o(t)}))};n.n(q).a.render(Object(c.jsx)(j,{children:Object(c.jsx)(S.a,{maxSnack:3,children:Object(c.jsx)(L,{})})}),document.getElementById("root")),M()}},[[489,1,2]]]);
//# sourceMappingURL=main.a7055603.chunk.js.map