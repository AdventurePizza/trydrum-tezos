(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{174:function(t,e){},267:function(t,e,n){},269:function(t,e,n){},310:function(t,e){},312:function(t,e){},322:function(t,e){},324:function(t,e){},350:function(t,e){},352:function(t,e){},353:function(t,e){},359:function(t,e){},361:function(t,e){},378:function(t,e){},380:function(t,e){},392:function(t,e){},395:function(t,e){},421:function(t,e){},423:function(t,e){},445:function(t,e){},449:function(t,e){},464:function(t,e){},486:function(t){t.exports=JSON.parse('{"mnemonic":["obtain","mother","defy","still","install","upon","assume","letter","guilt","want","sight","kitten","stamp","behave","dutch"],"secret":"6c826c62cf4695f0d8110e671699d1d2865405aa","amount":"12013885745","pkh":"tz1aLMj6CXkADSH9tBtRLAcigBqUaSA3sRwx","password":"EVqrauKmQ5","email":"awnthbxb.ceblojah@tezos.example.org"}')},487:function(t,e,n){"use strict";n.r(e);var c=n(22),r=(n(267),n(14)),a=n(0),s=n.n(a),i=n(58),o=n(25),u=(n(269),n(517)),d=n(516),f=n(3),l=n.n(f),m=n(120);m.a.initializeApp({apiKey:"AIzaSyAqu78CNrNMu_d7-XYZrxLXlfsRHL7kB8I",authDomain:"test-private-73e53.firebaseapp.com",projectId:"test-private-73e53",storageBucket:"test-private-73e53.appspot.com",messagingSenderId:"867921915417",appId:"1:867921915417:web:3c16b91322ce9cc33c4488",measurementId:"G-MRYPZR1EYF"});var p,h=m.a.firestore(),b=l.a.createContext({updateDrumCount:function(){},getDrumCount:function(){return Promise.resolve(0)}}),j=function(t){var e=t.children;return Object(c.jsx)(b.Provider,{value:{updateDrumCount:function(t){h.collection("drumbeat").doc("tracking").set({drumbeatCount:m.a.firestore.FieldValue.increment(t)},{merge:!0})},getDrumCount:function(){return new Promise(function(){var t=Object(i.a)(s.a.mark((function t(e){var n,c,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=h.collection("drumbeat").doc("tracking"),t.next=3,n.get();case 3:(c=t.sent).exists?(r=c.data(),e(r.drumbeatCount)):e(0);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},children:e})},v=n(515),O=n.p+"static/media/drum.5ae1d20c.svg",g=n.p+"static/media/drumbeat.e0f520f5.mp3",x=n(250),y=n.n(x),w=n.p+"static/media/musical-note.49e6a279.svg",k=n(119),S=n(514),R=n(26),C=n(5),z=n(7),A=n(259),N=n(256),B=n(486),D=function(){function t(e){Object(C.a)(this,t),this.tezos=void 0,this.rpcUrl=void 0,this.tezos=new A.a(e),this.rpcUrl=e,this.tezos.setSignerProvider(N.a.fromFundraiser(B.email,B.password,B.mnemonic.join(" ")))}return Object(z.a)(t,[{key:"transfer",value:function(t,e,n,c){this.tezos.contract.at(t).then((function(t){return console.log("Sending ".concat(c," from ").concat(e," to ").concat(n,"...")),t.methods.transfer(e,n,c).send()})).then((function(t){return console.log("Awaiting for ".concat(t.hash," to be confirmed...")),t.confirmation(1).then((function(){return t.hash}))})).then((function(t){return console.log("Hash: https://granada.tzstats.com/".concat(t))})).catch((function(t){return console.log("Error: ".concat(JSON.stringify(t,null,2)))}))}}]),t}(),T=y()("wss://adventure-drumbeat.herokuapp.com",{transports:["websocket"]}),P=new R.i({name:"Beacon Docs"});var q=function(){var t=l.a.createRef(),e=l.a.createRef(),n=Object(f.useRef)(),a=Object(f.useRef)(0),m=Object(f.useState)([]),h=Object(o.a)(m,2),j=h[0],x=h[1],y=Object(f.useState)(!1),R=Object(o.a)(y,2),C=R[0],z=R[1],A=Object(f.useContext)(b),N=A.updateDrumCount,B=A.getDrumCount,q=Object(f.useState)(-1),E=Object(o.a)(q,2),M=E[0],L=E[1],H=Object(k.b)().enqueueSnackbar,Z=Object(f.useState)({top:0,left:0}),I=Object(o.a)(Z,2),K=I[0],U=I[1],J=Object(f.useState)("sync"),X=Object(o.a)(J,2),F=X[0],V=X[1],Y=Object(f.useState)(0),G=Object(o.a)(Y,2),W=(G[0],G[1]),Q=Object(f.useState)(!1),_=Object(o.a)(Q,2),$=_[0],tt=_[1],et=Object(f.useState)(0),nt=Object(o.a)(et,2),ct=(nt[0],nt[1]),rt=Object(f.useState)(0),at=Object(o.a)(rt,2),st=at[0],it=at[1],ot=window.innerWidth<=500;Object(f.useEffect)((function(){function t(){return(t=Object(i.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.getActiveAccount();case 2:if(!(p=t.sent)){t.next=12;break}return V(p.address.slice(0,6)+"..."+p.address.slice(32,36)),t.next=7,fetch("https://api.tezos.domains/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:'\n\t\t\t\t\t\t\t  {\n\t\t\t\t\t\t\t\t  reverseRecord(address: "'+p.address+'"){owner domain{name}}\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t  ',variables:{}})}).then((function(t){return t.json()})).then((function(t){console.log(t),t.data.reverseRecord&&(e=t.data.reverseRecord.domain.name,V(e))}));case 7:tt(!0),fetch("https://api.tzkt.io/v1/accounts/"+p.address).then((function(t){return t.json()})).then((function(t){return W(t.balance)})),fetch("https://min-api.cryptocompare.com/data/price?fsym=XTZ&tsyms=USD").then((function(t){return t.json()})).then((function(t){return ct(t.USD)})),t.next=14;break;case 12:V("sync"),tt(!1);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(f.useEffect)((function(){e.current&&(n.current=e.current)}));var ut=Object(f.useCallback)((function(){if(t.current){var e=t.current.getBoundingClientRect();U({top:e.top-e.height/2,left:e.left+e.width/2-25})}}),[t]);Object(f.useEffect)((function(){B().then((function(t){L(t)}))}),[B]),Object(f.useEffect)((function(){var t=function(){n.current&&(n.current.currentTime=0,n.current.play(),L((function(t){return t+1}))),x((function(t){return t.concat({key:Object(S.a)()})})),H("someone beat the drum!",{variant:"default"})};return T.on("drumbeat",t),window.addEventListener("resize",ut),function(){T.off("drumbeat",t),window.removeEventListener("resize",ut)}}),[H,ut]),Object(f.useEffect)((function(){!t.current||0!==K.top&&0!==K.left||ut()}),[t,K,ut]);var dt=Object(f.useCallback)((function(){a.current&&(N(a.current),a.current=0)}),[]);function ft(){return(ft=Object(i.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.getActiveAccount();case 2:(p=t.sent)&&P.clearActiveAccount().then(Object(i.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.getActiveAccount();case 2:p=t.sent,V("sync"),tt(!1),W(0);case 6:case"end":return t.stop()}}),t)}))));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function lt(){return mt.apply(this,arguments)}function mt(){return(mt=Object(i.a)(s.a.mark((function t(){var e,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.getActiveAccount();case 2:if(!(p=t.sent)){t.next=8;break}return console.log("Already connected:",p.address),t.abrupt("return",p);case 8:return console.log("Not connected!"),t.prev=9,console.log("Requesting permissions..."),t.next=13,P.requestPermissions();case 13:return e=t.sent,console.log("Got permissions:",e.address),V(e.address),t.next=18,fetch("https://api.tezos.domains/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:'\n              {\n                reverseRecord(address: "'+e.address+'"){owner domain{name}}\n              }\n              ',variables:{}})}).then((function(t){return t.json()})).then((function(t){console.log(t),t.data.reverseRecord&&(n=t.data.reverseRecord.domain.name,V(n))}));case 18:tt(!0),fetch("https://api.tzkt.io/v1/accounts/"+e.address).then((function(t){return t.json()})).then((function(t){return W(t.balance)})),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(9),console.log("Got error:",t.t0);case 25:case"end":return t.stop()}}),t,null,[[9,22]])})))).apply(this,arguments)}function pt(){return ht.apply(this,arguments)}function ht(){return(ht=Object(i.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"https://granadanet.api.tez.ie","KT1VGf4ZoNMWNfBTEyBbRTX6q6TgHRnZ24zp","tz1aLMj6CXkADSH9tBtRLAcigBqUaSA3sRwx","tz2KxNHVsBwmPRgMZZKJt3mYnPMcK8Smw49g",st>0?(console.log(new D("https://granadanet.api.tez.ie").transfer("KT1VGf4ZoNMWNfBTEyBbRTX6q6TgHRnZ24zp","tz1aLMj6CXkADSH9tBtRLAcigBqUaSA3sRwx","tz2KxNHVsBwmPRgMZZKJt3mYnPMcK8Smw49g",st)),H("Recieved "+st+" DRUM !",{variant:"success"}),it(0)):H("You have nothing to claim :(",{variant:"warning"});case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.jsxs)("div",{className:"app-container",style:{minHeight:window.innerHeight-10},children:[Object(c.jsx)("audio",{src:g,ref:e,autoPlay:!0,muted:!0}),Object(c.jsx)("div",{className:"top-left",style:{fontSize:ot?"1em":"1.5em"},children:"drum"}),Object(c.jsx)("div",{className:"top-middle"}),M>=0&&Object(c.jsxs)("div",{className:"top-right",style:{fontSize:ot?"1em":"1.5em"},children:[M,"  "]}),Object(c.jsx)("img",{ref:t,onClick:function(){x((function(t){return t.concat({key:Object(S.a)()})})),z(!0),e.current&&(e.current.muted=!1,e.current.currentTime=0,e.current.play()),T.emit("drumbeat"),null!==a.current?(a.current++,dt()):a.current=0,L((function(t){return t+1})),it((function(t){return t+1}))},alt:"drum",src:O,className:"drum"}),!C&&Object(c.jsx)("div",{children:"Click the drum!"}),Object(c.jsx)(u.a,{children:j.map((function(t){return Object(c.jsx)(d.a,{timeout:1e3,classNames:"note-transition",onEntered:function(){var e=j.findIndex((function(e){return e.key===t.key}));x([].concat(Object(r.a)(j.slice(0,e)),Object(r.a)(j.slice(e+1))))},children:Object(c.jsx)("img",{alt:"music note",src:w,className:"music-note",style:{top:K.top,left:K.left}})},t.key)}))}),Object(c.jsx)("div",{className:"bottom-left",children:Object(c.jsxs)(v.a,{title:"Adventure Networks",size:ot?"small":"medium",onClick:function(){window.open("https://adventurenetworks.net/#/")},children:["Adventure ",Object(c.jsx)("br",{})," Networks "]})}),Object(c.jsxs)("div",{className:"bottom-right",children:[Object(c.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:$?Object(c.jsxs)(v.a,{title:"claim",size:ot?"small":"medium",onClick:Object(i.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pt();case 2:case"end":return t.stop()}}),t)}))),children:["  Claim ",st," DRUM  "]}):Object(c.jsxs)("div",{style:{fontSize:ot?"1em":"1.1em",marginRight:12},children:[" sync to claim ",st," DRUM "]})}),Object(c.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[$&&Object(c.jsxs)(v.a,{size:ot?"small":"medium",title:"unsync",onClick:function(){!function(){ft.apply(this,arguments)}()},children:[Object(c.jsx)("u",{children:"unsync"})," "]}),$&&Object(c.jsx)("div",{children:" | "}),Object(c.jsxs)(v.a,{title:"sync",size:ot?"small":"medium",onClick:Object(i.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,lt();case 2:case"end":return t.stop()}}),t)}))),children:[Object(c.jsx)("u",{children:F})," "]})]})]})]})},E=n(36),M=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,519)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,a=e.getLCP,s=e.getTTFB;n(t),c(t),r(t),a(t),s(t)}))};n.n(E).a.render(Object(c.jsx)(j,{children:Object(c.jsx)(k.a,{maxSnack:3,children:Object(c.jsx)(q,{})})}),document.getElementById("root")),M()}},[[487,1,2]]]);
//# sourceMappingURL=main.532165c2.chunk.js.map