(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{174:function(t,e){},267:function(t,e,n){},269:function(t,e,n){},310:function(t,e){},312:function(t,e){},322:function(t,e){},324:function(t,e){},350:function(t,e){},352:function(t,e){},353:function(t,e){},359:function(t,e){},361:function(t,e){},378:function(t,e){},380:function(t,e){},392:function(t,e){},395:function(t,e){},421:function(t,e){},423:function(t,e){},445:function(t,e){},449:function(t,e){},464:function(t,e){},486:function(t){t.exports=JSON.parse('{"mnemonic":["obtain","mother","defy","still","install","upon","assume","letter","guilt","want","sight","kitten","stamp","behave","dutch"],"secret":"6c826c62cf4695f0d8110e671699d1d2865405aa","amount":"12013885745","pkh":"tz1aLMj6CXkADSH9tBtRLAcigBqUaSA3sRwx","password":"EVqrauKmQ5","email":"awnthbxb.ceblojah@tezos.example.org"}')},487:function(t,e,n){"use strict";n.r(e);var c=n(19),r=(n(267),n(14)),a=n(0),s=n.n(a),i=n(58),o=n(25),u=(n(269),n(517)),d=n(516),f=n(3),l=n.n(f),m=n(120);m.a.initializeApp({apiKey:"AIzaSyAqu78CNrNMu_d7-XYZrxLXlfsRHL7kB8I",authDomain:"test-private-73e53.firebaseapp.com",projectId:"test-private-73e53",storageBucket:"test-private-73e53.appspot.com",messagingSenderId:"867921915417",appId:"1:867921915417:web:3c16b91322ce9cc33c4488",measurementId:"G-MRYPZR1EYF"});var p,h=m.a.firestore(),j=l.a.createContext({updateDrumCount:function(){},getDrumCount:function(){return Promise.resolve(0)}}),b=function(t){var e=t.children;return Object(c.jsx)(j.Provider,{value:{updateDrumCount:function(t){h.collection("drumbeat").doc("tracking").set({drumbeatCount:m.a.firestore.FieldValue.increment(t)},{merge:!0})},getDrumCount:function(){return new Promise(function(){var t=Object(i.a)(s.a.mark((function t(e){var n,c,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=h.collection("drumbeat").doc("tracking"),t.next=3,n.get();case 3:(c=t.sent).exists?(r=c.data(),e(r.drumbeatCount)):e(0);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},children:e})},O=n(515),v=n.p+"static/media/drum.5ae1d20c.svg",g=n.p+"static/media/construction.9e9ab6c6.png",x=n.p+"static/media/drumbeat.e0f520f5.mp3",y=n(250),w=n.n(y),k=n.p+"static/media/musical-note.49e6a279.svg",S=n(119),R=n(514),C=n(26),z=n(5),A=n(7),N=n(259),B=n(256),D=n(486),T=function(){function t(e){Object(z.a)(this,t),this.tezos=void 0,this.rpcUrl=void 0,this.tezos=new N.a(e),this.rpcUrl=e,this.tezos.setSignerProvider(B.a.fromFundraiser(D.email,D.password,D.mnemonic.join(" ")))}return Object(A.a)(t,[{key:"transfer",value:function(t,e,n,c){this.tezos.contract.at(t).then((function(t){return console.log("Sending ".concat(c," from ").concat(e," to ").concat(n,"...")),t.methods.transfer(e,n,c).send()})).then((function(t){return console.log("Awaiting for ".concat(t.hash," to be confirmed...")),t.confirmation(1).then((function(){return t.hash}))})).then((function(t){return console.log("Hash: https://granada.tzstats.com/".concat(t))})).catch((function(t){return console.log("Error: ".concat(JSON.stringify(t,null,2)))}))}}]),t}(),P=w()("wss://adventure-drumbeat.herokuapp.com",{transports:["websocket"]}),q=new C.i({name:"Beacon Docs"});var E=function(){var t=l.a.createRef(),e=l.a.createRef(),n=Object(f.useRef)(),a=Object(f.useRef)(0),m=Object(f.useState)([]),h=Object(o.a)(m,2),b=h[0],y=h[1],w=Object(f.useState)(!1),C=Object(o.a)(w,2),z=C[0],A=C[1],N=Object(f.useContext)(j),B=N.updateDrumCount,D=N.getDrumCount,E=Object(f.useState)(-1),M=Object(o.a)(E,2),L=M[0],H=M[1],Z=Object(S.b)().enqueueSnackbar,I=Object(f.useState)({top:0,left:0}),K=Object(o.a)(I,2),U=K[0],J=K[1],X=Object(f.useState)("sync"),F=Object(o.a)(X,2),V=F[0],Y=F[1],G=Object(f.useState)(0),W=Object(o.a)(G,2),Q=(W[0],W[1]),_=Object(f.useState)(!1),$=Object(o.a)(_,2),tt=$[0],et=$[1],nt=Object(f.useState)(0),ct=Object(o.a)(nt,2),rt=(ct[0],ct[1]),at=Object(f.useState)(0),st=Object(o.a)(at,2),it=st[0],ot=st[1],ut=window.innerWidth<=500;Object(f.useEffect)((function(){function t(){return(t=Object(i.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.getActiveAccount();case 2:if(!(p=t.sent)){t.next=12;break}return Y(p.address.slice(0,6)+"..."+p.address.slice(32,36)),t.next=7,fetch("https://api.tezos.domains/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:'\n\t\t\t\t\t\t\t  {\n\t\t\t\t\t\t\t\t  reverseRecord(address: "'+p.address+'"){owner domain{name}}\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t  ',variables:{}})}).then((function(t){return t.json()})).then((function(t){console.log(t),t.data.reverseRecord&&(e=t.data.reverseRecord.domain.name,Y(e))}));case 7:et(!0),fetch("https://api.tzkt.io/v1/accounts/"+p.address).then((function(t){return t.json()})).then((function(t){return Q(t.balance)})),fetch("https://min-api.cryptocompare.com/data/price?fsym=XTZ&tsyms=USD").then((function(t){return t.json()})).then((function(t){return rt(t.USD)})),t.next=14;break;case 12:Y("sync"),et(!1);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(f.useEffect)((function(){e.current&&(n.current=e.current)}));var dt=Object(f.useCallback)((function(){if(t.current){var e=t.current.getBoundingClientRect();J({top:e.top-e.height/2,left:e.left+e.width/2-25})}}),[t]);Object(f.useEffect)((function(){D().then((function(t){H(t)}))}),[D]),Object(f.useEffect)((function(){var t=function(){n.current&&(n.current.currentTime=0,n.current.play(),H((function(t){return t+1}))),y((function(t){return t.concat({key:Object(R.a)()})})),Z("someone beat the drum!",{variant:"default"})};return P.on("drumbeat",t),window.addEventListener("resize",dt),function(){P.off("drumbeat",t),window.removeEventListener("resize",dt)}}),[Z,dt]),Object(f.useEffect)((function(){!t.current||0!==U.top&&0!==U.left||dt()}),[t,U,dt]);var ft=Object(f.useCallback)((function(){a.current&&(B(a.current),a.current=0)}),[]);function lt(){return(lt=Object(i.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.getActiveAccount();case 2:(p=t.sent)&&q.clearActiveAccount().then(Object(i.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.getActiveAccount();case 2:p=t.sent,Y("sync"),et(!1),Q(0);case 6:case"end":return t.stop()}}),t)}))));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function mt(){return pt.apply(this,arguments)}function pt(){return(pt=Object(i.a)(s.a.mark((function t(){var e,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.getActiveAccount();case 2:if(!(p=t.sent)){t.next=8;break}return console.log("Already connected:",p.address),t.abrupt("return",p);case 8:return console.log("Not connected!"),t.prev=9,console.log("Requesting permissions..."),t.next=13,q.requestPermissions();case 13:return e=t.sent,console.log("Got permissions:",e.address),Y(e.address),t.next=18,fetch("https://api.tezos.domains/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:'\n              {\n                reverseRecord(address: "'+e.address+'"){owner domain{name}}\n              }\n              ',variables:{}})}).then((function(t){return t.json()})).then((function(t){console.log(t),t.data.reverseRecord&&(n=t.data.reverseRecord.domain.name,Y(n))}));case 18:et(!0),fetch("https://api.tzkt.io/v1/accounts/"+e.address).then((function(t){return t.json()})).then((function(t){return Q(t.balance)})),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(9),console.log("Got error:",t.t0);case 25:case"end":return t.stop()}}),t,null,[[9,22]])})))).apply(this,arguments)}function ht(){return jt.apply(this,arguments)}function jt(){return(jt=Object(i.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"https://granadanet.api.tez.ie","KT1VGf4ZoNMWNfBTEyBbRTX6q6TgHRnZ24zp","tz1aLMj6CXkADSH9tBtRLAcigBqUaSA3sRwx","tz2KxNHVsBwmPRgMZZKJt3mYnPMcK8Smw49g",it>0?(console.log(new T("https://granadanet.api.tez.ie").transfer("KT1VGf4ZoNMWNfBTEyBbRTX6q6TgHRnZ24zp","tz1aLMj6CXkADSH9tBtRLAcigBqUaSA3sRwx","tz2KxNHVsBwmPRgMZZKJt3mYnPMcK8Smw49g",it)),Z("Recieved "+it+" DRUM !",{variant:"success"}),ot(0)):Z("You have nothing to claim :(",{variant:"warning"});case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.jsxs)("div",{className:"app-container",style:{minHeight:window.innerHeight-10},children:[Object(c.jsx)("audio",{src:x,ref:e,autoPlay:!0,muted:!0}),Object(c.jsx)("div",{className:"top-left",style:{fontSize:ut?"1em":"1.5em"},children:"drum"}),Object(c.jsx)("div",{className:"top-middle"}),L>=0&&Object(c.jsxs)("div",{className:"top-right",style:{fontSize:ut?"1em":"1.5em"},children:[L,"  "]}),Object(c.jsx)("img",{ref:t,onClick:function(){y((function(t){return t.concat({key:Object(R.a)()})})),A(!0),e.current&&(e.current.muted=!1,e.current.currentTime=0,e.current.play()),P.emit("drumbeat"),null!==a.current?(a.current++,ft()):a.current=0,H((function(t){return t+1})),ot((function(t){return t+1}))},alt:"drum",src:v,className:"drum"}),!z&&Object(c.jsx)("div",{children:"Click the drum!"}),Object(c.jsx)(u.a,{children:b.map((function(t){return Object(c.jsx)(d.a,{timeout:1e3,classNames:"note-transition",onEntered:function(){var e=b.findIndex((function(e){return e.key===t.key}));y([].concat(Object(r.a)(b.slice(0,e)),Object(r.a)(b.slice(e+1))))},children:Object(c.jsx)("img",{alt:"music note",src:k,className:"music-note",style:{top:U.top,left:U.left}})},t.key)}))}),Object(c.jsx)("div",{className:"bottom-left",children:Object(c.jsxs)(O.a,{title:"Adventure Networks",size:ut?"small":"medium",onClick:function(){window.open("https://adventurenetworks.net/#/")},children:["Adventure ",Object(c.jsx)("br",{})," Networks "]})}),Object(c.jsxs)("div",{className:"bottom-right",children:[Object(c.jsxs)("div",{children:["  ",Object(c.jsx)("img",{style:{width:30},src:g})," under construction ",Object(c.jsx)("img",{style:{width:30},src:g})," "]}),Object(c.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:tt?Object(c.jsxs)(O.a,{title:"claim",size:ut?"small":"medium",onClick:Object(i.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ht();case 2:case"end":return t.stop()}}),t)}))),children:["  Claim ",it," DRUM  "]}):Object(c.jsxs)("div",{style:{fontSize:ut?"1em":"1.1em",marginRight:12},children:[" sync to claim ",it," DRUM "]})}),Object(c.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[tt&&Object(c.jsxs)(O.a,{size:ut?"small":"medium",title:"unsync",onClick:function(){!function(){lt.apply(this,arguments)}()},children:[Object(c.jsx)("u",{children:"unsync"})," "]}),tt&&Object(c.jsx)("div",{children:" | "}),Object(c.jsxs)(O.a,{title:"sync",size:ut?"small":"medium",onClick:Object(i.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,mt();case 2:case"end":return t.stop()}}),t)}))),children:[Object(c.jsx)("u",{children:V})," "]})]})]})]})},M=n(36),L=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,519)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,a=e.getLCP,s=e.getTTFB;n(t),c(t),r(t),a(t),s(t)}))};n.n(M).a.render(Object(c.jsx)(b,{children:Object(c.jsx)(S.a,{maxSnack:3,children:Object(c.jsx)(E,{})})}),document.getElementById("root")),L()}},[[487,1,2]]]);
//# sourceMappingURL=main.bcd51241.chunk.js.map