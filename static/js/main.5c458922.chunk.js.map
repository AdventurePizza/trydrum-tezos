{"version":3,"sources":["firebaseContext.tsx","App.tsx","assets/drum.svg","assets/drumbeat.mp3","assets/musical-note.svg","token-transfer.ts","reportWebVitals.ts","index.tsx"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","activeAccount","db","firestore","FirebaseContext","React","createContext","updateDrumCount","getDrumCount","Promise","resolve","FirebaseProvider","children","Provider","value","amt","collection","doc","set","drumbeatCount","FieldValue","increment","merge","a","docRef","get","exists","data","acc","require","token_transfer","rpcUrl","tezos","this","TezosToolkit","setSignerProvider","InMemorySigner","fromFundraiser","email","password","mnemonic","join","contract","sender","receiver","amount","at","then","console","log","methods","transfer","send","op","hash","confirmation","catch","error","JSON","stringify","socketURL","window","location","hostname","socket","io","transports","dAppClient","DAppClient","name","App","drumRef","createRef","audioRef","_audioRef","useRef","toUpdateCountRef","useState","notes","setNotes","hasClickedDrum","setHasClickedDrum","useContext","firebaseUpdateDrumCount","drumCount","setDrumCount","enqueueSnackbar","useSnackbar","top","left","noteCoords","setNoteCoords","synced","setSynced","balance","setBalance","showUnsync","setShowUnsync","xtzPrice","setXtzPrice","drumReward","setDrumReward","useEffect","getActiveAccount","address","slice","fetch","method","headers","body","query","variables","res","json","result","reverseRecord","domain","response","USD","getAcc","current","setCoords","useCallback","rect","getBoundingClientRect","height","width","count","onDrumbeat","currentTime","play","concat","key","uuidv4","variant","on","addEventListener","off","removeEventListener","_","throttle","clearActiveAccount","sync","requestPermissions","permissions","reload","claimRewards","className","style","minHeight","innerHeight","src","drumBeat","ref","autoPlay","muted","Button","title","onClick","unsync","emit","alt","drum","TransitionGroup","map","note","CSSTransition","timeout","classNames","onEntered","noteIndex","findIndex","_note","musicNote","IconButton","open","Twitter","color","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","maxSnack","document","getElementById"],"mappings":"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","file":"static/js/main.5c458922.chunk.js","sourcesContent":["import React from \"react\";\nimport firebase from \"firebase\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyC19cZLLW3oYWjQxWEFPhdtzSOGWQcgQjQ\",\n  authDomain: \"adventure-ea7cd.firebaseapp.com\",\n  databaseURL: \"https://adventure-ea7cd.firebaseio.com\",\n  projectId: \"adventure-ea7cd\",\n  storageBucket: \"adventure-ea7cd.appspot.com\",\n  messagingSenderId: \"753400311148\",\n  appId: \"1:753400311148:web:f8f56db5a153280f185749\",\n};\n\nfirebase.initializeApp(firebaseConfig);\n\nconst db = firebase.firestore();\n\nexport interface IFirebaseContext {\n  updateDrumCount: (amt: number) => void;\n  getDrumCount: () => Promise<number>;\n}\n\nexport const FirebaseContext = React.createContext<IFirebaseContext>({\n  updateDrumCount: () => {},\n  getDrumCount: () => Promise.resolve(0),\n});\n\nexport const FirebaseProvider: React.FC = ({ children }) => {\n  const updateDrumCount = (amt: number) => {\n    const docRef = db.collection(\"drumbeat\").doc(\"tracking\");\n    docRef.set(\n      { drumbeatCount: firebase.firestore.FieldValue.increment(amt) },\n      {\n        merge: true,\n      }\n    );\n  };\n\n  const getDrumCount = () => {\n    return new Promise<number>(async (resolve) => {\n      const docRef = db.collection(\"drumbeat\").doc(\"tracking\");\n      const doc = await docRef.get();\n\n      if (!doc.exists) {\n        resolve(0);\n      } else {\n        const data = doc.data() as { drumbeatCount: number };\n        resolve(data.drumbeatCount);\n      }\n    });\n  };\n\n  return (\n    <FirebaseContext.Provider\n      value={{\n        updateDrumCount,\n        getDrumCount,\n      }}\n    >\n      {children}\n    </FirebaseContext.Provider>\n  );\n};\n","import \"./App.css\";\n\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\"; // ES6\nimport React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\n\nimport { FirebaseContext } from \"./firebaseContext\";\nimport { IconButton, Button } from \"@material-ui/core\";\nimport { Twitter } from \"@material-ui/icons\";\nimport _ from \"underscore\";\nimport drum from \"./assets/drum.svg\";\n//@ts-ignore\nimport drumBeat from \"./assets/drumbeat.mp3\";\n// import drumBeat from \"./assets/leo.mp3\";\nimport io from \"socket.io-client\";\nimport musicNote from \"./assets/musical-note.svg\";\nimport { useSnackbar } from \"notistack\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { DAppClient } from \"@airgap/beacon-sdk\";\nimport { token_transfer } from './token-transfer'\n\nconst socketURL =\n  window.location.hostname === \"localhost\"\n    ? \"ws://localhost:8000\"\n    : \"wss://adventure-drumbeat.herokuapp.com\";\n// const socketURL = \"wss://adventure-drumbeat.herokuapp.com\";\nconst socket = io(socketURL, { transports: [\"websocket\"] });\nconst dAppClient = new DAppClient({ name: \"Beacon Docs\" });\nlet activeAccount;\n\ninterface INote {\n  key: string;\n}\n\nfunction App() {\n  const drumRef = React.createRef<HTMLImageElement>();\n  const audioRef = React.createRef<HTMLAudioElement>();\n  const _audioRef = useRef<HTMLAudioElement>();\n\n  const toUpdateCountRef = useRef<number>(0);\n\n  const [notes, setNotes] = useState<INote[]>([]);\n  const [hasClickedDrum, setHasClickedDrum] = useState(false);\n  const { updateDrumCount: firebaseUpdateDrumCount, getDrumCount } = useContext(\n    FirebaseContext\n  );\n\n  const [drumCount, setDrumCount] = useState(-1);\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [noteCoords, setNoteCoords] = useState<{ top: number; left: number }>({\n    top: 0,\n    left: 0,\n  });\n\n\tconst [synced, setSynced] = useState('sync');\n\tconst [balance, setBalance] = useState(0);\n\tconst [showUnsync, setShowUnsync] = useState(false);\n\tconst [xtzPrice, setXtzPrice] = useState(0);\n\n  const [drumReward, setDrumReward] = useState(0);\n\n  useEffect(() => {\n\t\tasync function getAcc() {\n\t\t\tactiveAccount = await dAppClient.getActiveAccount();\n\t\t\tif (activeAccount){\n\t\t\t  setSynced(activeAccount.address.slice(0, 6) + \"...\" + activeAccount.address.slice(32, 36) );\n        //fetch wallet name if it exist for example, trydrum.tez\n\t\t\t  let domain;\n\t\t\t  await fetch('https://api.tezos.domains/graphql', {\n\t\t\t\t  method: 'POST',\n\t\t\t\t  headers: {\n\t\t\t\t\t  'Content-Type': 'application/json',\n\t\t\t\t  },\n\t\t\t\t  body: JSON.stringify({\n\t\t\t\t\t  query: `\n\t\t\t\t\t\t\t  {\n\t\t\t\t\t\t\t\t  reverseRecord(address: \"`+ activeAccount.address +`\"){owner domain{name}}\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t  `,\n\t\t\t\t\t  variables: {\n\t\t\t\t\t  },\n\t\t\t\t  }\n\t\t\t\t  ),\n\t\t\t\t  })\n\t\t\t\t  .then((res) => res.json())\n\t\t\t\t  .then((result) => {\n\t\t\t\t\t  console.log(result);\t\n\t\t\t\t\t  if(result.data.reverseRecord){\n\t\t\t\t\t\t\tdomain = result.data.reverseRecord.domain.name;\n\t\t\t\t\t\t\tsetSynced(domain);\n\t\t\t\t\t\t}\n\t\t\t\t  });\n\t\t\t  \n\t\t\t  setShowUnsync(true);\n\t\t\t  \n        //set XTZ balance\n\t\t\t  fetch('https://api.tzkt.io/v1/accounts/' + activeAccount.address)\n\t\t\t\t.then(response => response.json())\n\t\t\t\t.then(data => setBalance(data.balance))\n\n        fetch('https://min-api.cryptocompare.com/data/price?fsym=XTZ&tsyms=USD')\n\t\t\t\t.then(response => response.json())\n\t\t\t\t.then(data => setXtzPrice(data.USD))\n\t\t\t}\n      //case its not already synced\n\t\t\telse{\n\t\t\t  setSynced('sync');\n\t\t\t  setShowUnsync(false);\n\t\t\t}\n\t\t}\n\t\t  getAcc();\n\t}, []);\n\n  useEffect(() => {\n    if (audioRef.current) {\n      _audioRef.current = audioRef.current;\n    }\n  });\n\n  const setCoords = useCallback(() => {\n    if (drumRef.current) {\n      const rect = drumRef.current.getBoundingClientRect();\n      setNoteCoords({\n        top: rect.top - rect.height / 2,\n        left: rect.left + rect.width / 2 - 25, // noteWidth = 50\n      });\n    }\n  }, [drumRef]);\n\n  useEffect(() => {\n    getDrumCount().then((count) => {\n      setDrumCount(count);\n    });\n  }, [getDrumCount]);\n\n  useEffect(() => {\n    const onDrumbeat = () => {\n      if (_audioRef.current) {\n        _audioRef.current.currentTime = 0;\n        _audioRef.current.play();\n        setDrumCount((count) => count + 1);\n      }\n\n      setNotes((notes) => notes.concat({ key: uuidv4() }));\n      enqueueSnackbar(\"someone beat the drum!\", {\n        variant: \"default\",\n      });\n    };\n\n    socket.on(\"drumbeat\", onDrumbeat);\n\n    window.addEventListener(\"resize\", setCoords);\n\n    return () => {\n      socket.off(\"drumbeat\", onDrumbeat);\n      window.removeEventListener(\"resize\", setCoords);\n    };\n  }, [enqueueSnackbar, setCoords]);\n\n  useEffect(() => {\n    if (drumRef.current && (noteCoords.top === 0 || noteCoords.left === 0)) {\n      setCoords();\n    }\n  }, [drumRef, noteCoords, setCoords]);\n\n  const onClickDrum = () => {\n    setNotes((notes) => notes.concat({ key: uuidv4() }));\n    setHasClickedDrum(true);\n\n    if (audioRef.current) {\n      audioRef.current.muted = false;\n      audioRef.current.currentTime = 0;\n      audioRef.current.play();\n    }\n\n    socket.emit(\"drumbeat\");\n\n    if (toUpdateCountRef.current !== null) {\n      toUpdateCountRef.current++;\n      updateDrumCount();\n    } else {\n      toUpdateCountRef.current = 0;\n    }\n\n    setDrumCount((count) => count + 1);\n    setDrumReward((drumReward) => drumReward + 1);\n  };\n\n  // eslint-disable-next-line\n  const updateDrumCount = useCallback(\n    _.throttle(() => {\n      if (toUpdateCountRef.current) {\n        firebaseUpdateDrumCount(toUpdateCountRef.current);\n        toUpdateCountRef.current = 0;\n      }\n    }, 3000),\n    []\n  );\n\n  async function unsync() {\n\t\tactiveAccount = await dAppClient.getActiveAccount();\n\t\tif (activeAccount) {\n\t\t  // User already has account connected, everything is ready\n\t\t  // You can now do an operation request, sign request, or send another permission request to switch wallet\n\t\t  dAppClient.clearActiveAccount().then(async () => {\n\t\t\tactiveAccount = await dAppClient.getActiveAccount();\n\t\n\t\t\tsetSynced('sync');\n\t\t\tsetShowUnsync(false);\n\t\t\tsetBalance(0);\n\t\t  });\n\t\t}\n\t  }\n\t  \n\tasync function sync() {\n\t\tactiveAccount = await dAppClient.getActiveAccount();\n\t\tif (activeAccount) {\n\t\t  // User already has account connected, everything is ready\n\t\t  // You can now do an operation request, sign request, or send another permission request to switch wallet\n\n\t\t  console.log(\"Already connected:\", activeAccount.address);\n\t\t  return activeAccount;\n\t\t} else {\n\t\t  // The user is not connected. A button should be displayed where the user can connect to his wallet.\n\t\t  console.log(\"Not connected!\");\n\t\t  try {\n\t\t\tconsole.log(\"Requesting permissions...\");\n\t\t\tconst permissions = await dAppClient.requestPermissions();\n\t\t\tconsole.log(\"Got permissions:\", permissions.address);\n\t\t\tsetSynced(permissions.address)\n\t\t\tconsole.log(\"reload\")\n\t\t\twindow.location.reload();\n\t\t\tsetShowUnsync(true);\n\n\t\t\tfetch('https://api.tzkt.io/v1/accounts/' + permissions.address)\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => setBalance(data.balance))\n\t\t  } catch (error) {\n\t\n\t\t\tconsole.log(\"Got error:\", error);\n\t\t  }\n\t\t}\n\t  }\n\n    async function claimRewards() {\n      const RPC_URL = 'https://granadanet.api.tez.ie';\n      const CONTRACT = 'KT1VGf4ZoNMWNfBTEyBbRTX6q6TgHRnZ24zp' //address of the published contract\n      const SENDER =   'tz1aLMj6CXkADSH9tBtRLAcigBqUaSA3sRwx' //public address of the sender (find it in acc.json)\n      const RECEIVER = 'tz2KxNHVsBwmPRgMZZKJt3mYnPMcK8Smw49g' // recipient's public address (take it from the Tezos wallet you had created)\n\n      if(drumReward > 0){\n        console.log(new token_transfer(RPC_URL).transfer(CONTRACT, SENDER, RECEIVER, drumReward));\n        enqueueSnackbar(\"Recieved \" + drumReward + \" DRUM !\" , {\n          variant: \"success\",\n        });\n        setDrumReward(0);\n      }\n      else{\n        enqueueSnackbar(\"You have nothing to claim :(\" , {\n          variant: \"warning\",\n        });\n      }\n\n    }\n  return (\n    <div\n      className=\"app-container\"\n      style={{ minHeight: window.innerHeight - 10 }}\n    >\n      <audio src={drumBeat} ref={audioRef} autoPlay muted />\n\n      <div className=\"top-left\"> \t\n        {showUnsync && <Button  title={\"unsync\"} onClick={() => { unsync() }} >unsync </Button>} \n        | \n        <Button  title={\"sync\"}  onClick={async () => { \tawait sync();\t}} >{synced} </Button> \n        | \n        <Button  title={\"xtz balance\"}> {balance/1000000} ꜩ </Button> \n        |\n        <Button  title={\"price\"}>  ꜩ = {xtzPrice} $ </Button> \n        |\n        <Button  title={\"claim\"} onClick={ async () => { \tawait claimRewards();\t}} >  Claim {drumReward} DRUM  </Button> \n      </div>\n\n      {drumCount >= 0 && <div className=\"top-right\">{drumCount}</div>}\n\n      <img\n        ref={drumRef}\n        onClick={onClickDrum}\n        alt=\"drum\"\n        src={drum}\n        className=\"drum\"\n      />\n      {!hasClickedDrum && <div>Click the drum!</div>}\n\n      <TransitionGroup>\n        {notes.map((note) => (\n          <CSSTransition\n            key={note.key}\n            timeout={1000}\n            classNames=\"note-transition\"\n            onEntered={() => {\n              const noteIndex = notes.findIndex(\n                (_note) => _note.key === note.key\n              );\n              setNotes([\n                ...notes.slice(0, noteIndex),\n                ...notes.slice(noteIndex + 1),\n              ]);\n            }}\n          >\n            <img\n              alt=\"music note\"\n              src={musicNote}\n              className=\"music-note\"\n              style={{\n                top: noteCoords.top,\n                left: noteCoords.left,\n              }}\n            />\n          </CSSTransition>\n        ))}\n      </TransitionGroup>\n\n      <div className=\"adventure-logo\" title=\"production: leo and mike\">\n        <div>Adventure Networks</div>\n      </div>\n\n      <div className=\"bottom-right\">\n        <IconButton\n          onClick={() => {\n            window.open(\"https://twitter.com/adventurecorpp\");\n          }}\n        >\n          <Twitter style={{ width: 50, height: 50, color: \"#1DA1F2\" }} />\n        </IconButton>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","export default __webpack_public_path__ + \"static/media/drum.5ae1d20c.svg\";","export default __webpack_public_path__ + \"static/media/drumbeat.e0f520f5.mp3\";","export default __webpack_public_path__ + \"static/media/musical-note.49e6a279.svg\";","//importing the methods of Taquito and the file with the test account data acc.json\n\nimport { TezosToolkit } from '@taquito/taquito'\nimport { InMemorySigner } from '@taquito/signer'\nconst acc = require('./acc.json')\nexport class token_transfer {\n  // setting up the link to the testnet’s public node\n  private tezos: TezosToolkit\n  rpcUrl: string\n\n  constructor(rpcUrl: string) {\n    this.tezos = new TezosToolkit(rpcUrl)\n    this.rpcUrl = rpcUrl\n\n    //reading the mail, password, and the passphrase that can produce the private key\n    this.tezos.setSignerProvider(InMemorySigner.fromFundraiser(acc.email, acc.password, acc.mnemonic.join(' ')))\n  }\n\n  // declaring the method transfer that has the following params:\n  //\n  // 1) contract: contract address;\n  // 2) sender: sender address;\n  // 3) receiver: recipient address;\n  // 4) amount: amount of tokens to be sent.\n\n  public transfer(contract: string, sender: string, receiver: string, amount: number) {\n    this.tezos.contract\n      .at(contract) //calling the contract at the address\n      .then((contract) => {\n        console.log(`Sending ${amount} from ${sender} to ${receiver}...`)\n        //calling the entry point transfer, send the reciever/sender addresses and the amount of tokens to be sent to it.\n        return contract.methods.transfer(sender, receiver, amount).send()\n      })\n      .then((op) => {\n        console.log(`Awaiting for ${op.hash} to be confirmed...`)\n        return op.confirmation(1).then(() => op.hash) //waiting for 1 network confirmation\n      })\n      .then((hash) => console.log(`Hash: https://granada.tzstats.com/${hash}`)) //getting the operation’s hash\n      .catch((error) => console.log(`Error: ${JSON.stringify(error, null, 2)}`))\n  }\n}","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);  \n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n}\n\nexport default reportWebVitals;\n","import \"./index.css\";\n\nimport App from \"./App\";\nimport { FirebaseProvider } from \"./firebaseContext\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { SnackbarProvider } from \"notistack\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <FirebaseProvider>\n    <SnackbarProvider maxSnack={3}>\n      <App />\n    </SnackbarProvider>\n  </FirebaseProvider>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}