(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{175:function(t,e){},269:function(t,e,n){},271:function(t,e,n){},312:function(t,e){},314:function(t,e){},324:function(t,e){},326:function(t,e){},352:function(t,e){},354:function(t,e){},355:function(t,e){},361:function(t,e){},363:function(t,e){},380:function(t,e){},382:function(t,e){},394:function(t,e){},397:function(t,e){},423:function(t,e){},425:function(t,e){},447:function(t,e){},451:function(t,e){},466:function(t,e){},488:function(t){t.exports=JSON.parse('{"mnemonic":["obtain","mother","defy","still","install","upon","assume","letter","guilt","want","sight","kitten","stamp","behave","dutch"],"secret":"6c826c62cf4695f0d8110e671699d1d2865405aa","amount":"12013885745","pkh":"tz1aLMj6CXkADSH9tBtRLAcigBqUaSA3sRwx","password":"EVqrauKmQ5","email":"awnthbxb.ceblojah@tezos.example.org"}')},489:function(t,e,n){"use strict";n.r(e);var c=n(26),r=(n(269),n(15)),a=n(0),s=n.n(a),o=n(59),i=n(25),u=(n(271),n(519)),f=n(518),l=n(3),d=n.n(l),m=n(121);m.a.initializeApp({apiKey:"AIzaSyAqu78CNrNMu_d7-XYZrxLXlfsRHL7kB8I",authDomain:"test-private-73e53.firebaseapp.com",projectId:"test-private-73e53",storageBucket:"test-private-73e53.appspot.com",messagingSenderId:"867921915417",appId:"1:867921915417:web:3c16b91322ce9cc33c4488",measurementId:"G-MRYPZR1EYF"});var p,b=m.a.firestore(),h=d.a.createContext({updateDrumCount:function(){},getDrumCount:function(){return Promise.resolve(0)}}),j=function(t){var e=t.children;return Object(c.jsx)(h.Provider,{value:{updateDrumCount:function(t){b.collection("drumbeat").doc("tracking").set({drumbeatCount:m.a.firestore.FieldValue.increment(t)},{merge:!0})},getDrumCount:function(){return new Promise(function(){var t=Object(o.a)(s.a.mark((function t(e){var n,c,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=b.collection("drumbeat").doc("tracking"),t.next=3,n.get();case 3:(c=t.sent).exists?(r=c.data(),e(r.drumbeatCount)):e(0);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},children:e})},v=n(517),O=n(260),g=n.p+"static/media/drum.5ae1d20c.svg",x=n.p+"static/media/drumbeat.e0f520f5.mp3",w=n(251),y=n.n(w),k=n.p+"static/media/musical-note.49e6a279.svg",S=n(120),C=n(516),z=n(27),R=n(5),A=n(7),N=n(261),B=n(257),D=n(488),T=function(){function t(e){Object(R.a)(this,t),this.tezos=void 0,this.rpcUrl=void 0,this.tezos=new N.a(e),this.rpcUrl=e,this.tezos.setSignerProvider(B.a.fromFundraiser(D.email,D.password,D.mnemonic.join(" ")))}return Object(A.a)(t,[{key:"transfer",value:function(t,e,n,c){this.tezos.contract.at(t).then((function(t){return console.log("Sending ".concat(c," from ").concat(e," to ").concat(n,"...")),t.methods.transfer(e,n,c).send()})).then((function(t){return console.log("Awaiting for ".concat(t.hash," to be confirmed...")),t.confirmation(1).then((function(){return t.hash}))})).then((function(t){return console.log("Hash: https://granada.tzstats.com/".concat(t))})).catch((function(t){return console.log("Error: ".concat(JSON.stringify(t,null,2)))}))}}]),t}(),E=y()("wss://adventure-drumbeat.herokuapp.com",{transports:["websocket"]}),P=new z.i({name:"Beacon Docs"});var M=function(){var t=d.a.createRef(),e=d.a.createRef(),n=Object(l.useRef)(),a=Object(l.useRef)(0),m=Object(l.useState)([]),b=Object(i.a)(m,2),j=b[0],w=b[1],y=Object(l.useState)(!1),z=Object(i.a)(y,2),R=z[0],A=z[1],N=Object(l.useContext)(h),B=N.updateDrumCount,D=N.getDrumCount,M=Object(l.useState)(-1),q=Object(i.a)(M,2),L=q[0],H=q[1],Z=Object(S.b)().enqueueSnackbar,I=Object(l.useState)({top:0,left:0}),K=Object(i.a)(I,2),U=K[0],X=K[1],F=Object(l.useState)("sync"),J=Object(i.a)(F,2),V=J[0],Y=J[1],G=Object(l.useState)(0),W=Object(i.a)(G,2),Q=(W[0],W[1]),_=Object(l.useState)(!1),$=Object(i.a)(_,2),tt=$[0],et=$[1],nt=Object(l.useState)(0),ct=Object(i.a)(nt,2),rt=(ct[0],ct[1]),at=Object(l.useState)(0),st=Object(i.a)(at,2),ot=st[0],it=st[1],ut=window.innerWidth<=500;Object(l.useEffect)((function(){function t(){return(t=Object(o.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.getActiveAccount();case 2:if(!(p=t.sent)){t.next=12;break}return Y(p.address.slice(0,6)+"..."+p.address.slice(32,36)),t.next=7,fetch("https://api.tezos.domains/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:'\n\t\t\t\t\t\t\t  {\n\t\t\t\t\t\t\t\t  reverseRecord(address: "'+p.address+'"){owner domain{name}}\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t  ',variables:{}})}).then((function(t){return t.json()})).then((function(t){console.log(t),t.data.reverseRecord&&(e=t.data.reverseRecord.domain.name,Y(e))}));case 7:et(!0),fetch("https://api.tzkt.io/v1/accounts/"+p.address).then((function(t){return t.json()})).then((function(t){return Q(t.balance)})),fetch("https://min-api.cryptocompare.com/data/price?fsym=XTZ&tsyms=USD").then((function(t){return t.json()})).then((function(t){return rt(t.USD)})),t.next=14;break;case 12:Y("sync"),et(!1);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(l.useEffect)((function(){e.current&&(n.current=e.current)}));var ft=Object(l.useCallback)((function(){if(t.current){var e=t.current.getBoundingClientRect();X({top:e.top-e.height/2,left:e.left+e.width/2-25})}}),[t]);Object(l.useEffect)((function(){D().then((function(t){H(t)}))}),[D]),Object(l.useEffect)((function(){var t=function(){n.current&&(n.current.currentTime=0,n.current.play(),H((function(t){return t+1}))),w((function(t){return t.concat({key:Object(C.a)()})})),Z("someone beat the drum!",{variant:"default"})};return E.on("drumbeat",t),window.addEventListener("resize",ft),function(){E.off("drumbeat",t),window.removeEventListener("resize",ft)}}),[Z,ft]),Object(l.useEffect)((function(){!t.current||0!==U.top&&0!==U.left||ft()}),[t,U,ft]);var lt=Object(l.useCallback)(O.a.throttle((function(){a.current&&(B(a.current),a.current=0)}),3e3),[]);function dt(){return(dt=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.getActiveAccount();case 2:(p=t.sent)&&P.clearActiveAccount().then(Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.getActiveAccount();case 2:p=t.sent,Y("sync"),et(!1),Q(0);case 6:case"end":return t.stop()}}),t)}))));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function mt(){return pt.apply(this,arguments)}function pt(){return(pt=Object(o.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.getActiveAccount();case 2:if(!(p=t.sent)){t.next=8;break}return console.log("Already connected:",p.address),t.abrupt("return",p);case 8:return console.log("Not connected!"),t.prev=9,console.log("Requesting permissions..."),t.next=13,P.requestPermissions();case 13:e=t.sent,console.log("Got permissions:",e.address),Y(e.address),console.log("reload"),window.location.reload(),et(!0),fetch("https://api.tzkt.io/v1/accounts/"+e.address).then((function(t){return t.json()})).then((function(t){return Q(t.balance)})),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(9),console.log("Got error:",t.t0);case 25:case"end":return t.stop()}}),t,null,[[9,22]])})))).apply(this,arguments)}function bt(){return ht.apply(this,arguments)}function ht(){return(ht=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"https://granadanet.api.tez.ie","KT1VGf4ZoNMWNfBTEyBbRTX6q6TgHRnZ24zp","tz1aLMj6CXkADSH9tBtRLAcigBqUaSA3sRwx","tz2KxNHVsBwmPRgMZZKJt3mYnPMcK8Smw49g",ot>0?(console.log(new T("https://granadanet.api.tez.ie").transfer("KT1VGf4ZoNMWNfBTEyBbRTX6q6TgHRnZ24zp","tz1aLMj6CXkADSH9tBtRLAcigBqUaSA3sRwx","tz2KxNHVsBwmPRgMZZKJt3mYnPMcK8Smw49g",ot)),Z("Recieved "+ot+" DRUM !",{variant:"success"}),it(0)):Z("You have nothing to claim :(",{variant:"warning"});case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.jsxs)("div",{className:"app-container",style:{minHeight:window.innerHeight-10},children:[Object(c.jsx)("audio",{src:x,ref:e,autoPlay:!0,muted:!0}),Object(c.jsx)("div",{className:"top-left",style:{fontSize:ut?"1em":"1.5em"},children:"drum"}),Object(c.jsx)("div",{className:"top-middle"}),L>=0&&Object(c.jsxs)("div",{className:"top-right",style:{fontSize:ut?"1em":"1.5em"},children:[L,"  "]}),Object(c.jsx)("img",{ref:t,onClick:function(){w((function(t){return t.concat({key:Object(C.a)()})})),A(!0),e.current&&(e.current.muted=!1,e.current.currentTime=0,e.current.play()),E.emit("drumbeat"),null!==a.current?(a.current++,lt()):a.current=0,H((function(t){return t+1})),it((function(t){return t+1}))},alt:"drum",src:g,className:"drum"}),!R&&Object(c.jsx)("div",{children:"Click the drum!"}),Object(c.jsx)(u.a,{children:j.map((function(t){return Object(c.jsx)(f.a,{timeout:1e3,classNames:"note-transition",onEntered:function(){var e=j.findIndex((function(e){return e.key===t.key}));w([].concat(Object(r.a)(j.slice(0,e)),Object(r.a)(j.slice(e+1))))},children:Object(c.jsx)("img",{alt:"music note",src:k,className:"music-note",style:{top:U.top,left:U.left}})},t.key)}))}),Object(c.jsx)("div",{className:"bottom-left",children:Object(c.jsxs)(v.a,{title:"Adventure Networks",size:ut?"small":"medium",onClick:function(){window.open("https://adventurenetworks.net/#/")},children:["Adventure ",Object(c.jsx)("br",{})," Networks "]})}),Object(c.jsxs)("div",{className:"bottom-right",children:[Object(c.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(c.jsxs)(v.a,{title:"claim",size:ut?"small":"medium",onClick:Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt();case 2:case"end":return t.stop()}}),t)}))),children:["  Claim ",ot," DRUM  "]})}),Object(c.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[tt&&Object(c.jsx)(v.a,{size:ut?"small":"medium",title:"unsync",onClick:function(){!function(){dt.apply(this,arguments)}()},children:"unsync "}),tt&&Object(c.jsx)("div",{children:" | "}),Object(c.jsxs)(v.a,{title:"sync",size:ut?"small":"medium",onClick:Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,mt();case 2:case"end":return t.stop()}}),t)}))),children:[V," "]})]})]})]})},q=n(37),L=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,521)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,a=e.getLCP,s=e.getTTFB;n(t),c(t),r(t),a(t),s(t)}))};n.n(q).a.render(Object(c.jsx)(j,{children:Object(c.jsx)(S.a,{maxSnack:3,children:Object(c.jsx)(M,{})})}),document.getElementById("root")),L()}},[[489,1,2]]]);
//# sourceMappingURL=main.2d62314c.chunk.js.map