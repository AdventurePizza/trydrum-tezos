(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{175:function(t,e){},272:function(t,e,n){},274:function(t,e,n){},315:function(t,e){},317:function(t,e){},327:function(t,e){},329:function(t,e){},355:function(t,e){},357:function(t,e){},358:function(t,e){},364:function(t,e){},366:function(t,e){},383:function(t,e){},385:function(t,e){},397:function(t,e){},400:function(t,e){},426:function(t,e){},428:function(t,e){},450:function(t,e){},454:function(t,e){},469:function(t,e){},491:function(t){t.exports=JSON.parse('{"mnemonic":["obtain","mother","defy","still","install","upon","assume","letter","guilt","want","sight","kitten","stamp","behave","dutch"],"secret":"6c826c62cf4695f0d8110e671699d1d2865405aa","amount":"12013885745","pkh":"tz1aLMj6CXkADSH9tBtRLAcigBqUaSA3sRwx","password":"EVqrauKmQ5","email":"awnthbxb.ceblojah@tezos.example.org"}')},492:function(t,e,n){"use strict";n.r(e);var c=n(29),r=(n(272),n(15)),a=n(0),o=n.n(a),i=n(59),s=n(25),u=(n(274),n(523)),f=n(522),d=n(3),l=n.n(d),p=n(121);p.a.initializeApp({apiKey:"AIzaSyC19cZLLW3oYWjQxWEFPhdtzSOGWQcgQjQ",authDomain:"adventure-ea7cd.firebaseapp.com",databaseURL:"https://adventure-ea7cd.firebaseio.com",projectId:"adventure-ea7cd",storageBucket:"adventure-ea7cd.appspot.com",messagingSenderId:"753400311148",appId:"1:753400311148:web:f8f56db5a153280f185749"});var h,m=p.a.firestore(),b=l.a.createContext({updateDrumCount:function(){},getDrumCount:function(){return Promise.resolve(0)}}),j=function(t){var e=t.children;return Object(c.jsx)(b.Provider,{value:{updateDrumCount:function(t){m.collection("drumbeat").doc("tracking").set({drumbeatCount:p.a.firestore.FieldValue.increment(t)},{merge:!0})},getDrumCount:function(){return new Promise(function(){var t=Object(i.a)(o.a.mark((function t(e){var n,c,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=m.collection("drumbeat").doc("tracking"),t.next=3,n.get();case 3:(c=t.sent).exists?(r=c.data(),e(r.drumbeatCount)):e(0);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},children:e})},O=n(518),g=n(519),v=n(524),x=n(260),w=n.p+"static/media/drum.5ae1d20c.svg",k=n.p+"static/media/drumbeat.e0f520f5.mp3",y=n(251),S=n.n(y),C=n.p+"static/media/musical-note.49e6a279.svg",A=n(120),R=n(521),z=n(26),N=n(5),B=n(7),D=n(261),T=n(257),E=n(491),P=function(){function t(e){Object(N.a)(this,t),this.tezos=void 0,this.rpcUrl=void 0,this.tezos=new D.a(e),this.rpcUrl=e,this.tezos.setSignerProvider(T.a.fromFundraiser(E.email,E.password,E.mnemonic.join(" ")))}return Object(B.a)(t,[{key:"transfer",value:function(t,e,n,c){this.tezos.contract.at(t).then((function(t){return console.log("Sending ".concat(c," from ").concat(e," to ").concat(n,"...")),t.methods.transfer(e,n,c).send()})).then((function(t){return console.log("Awaiting for ".concat(t.hash," to be confirmed...")),t.confirmation(1).then((function(){return t.hash}))})).then((function(t){return console.log("Hash: https://granada.tzstats.com/".concat(t))})).catch((function(t){return console.log("Error: ".concat(JSON.stringify(t,null,2)))}))}}]),t}(),L="localhost"===window.location.hostname?"ws://localhost:8000":"wss://adventure-drumbeat.herokuapp.com",q=S()(L,{transports:["websocket"]}),M=new z.i({name:"Beacon Docs"});var H=function(){var t=l.a.createRef(),e=l.a.createRef(),n=Object(d.useRef)(),a=Object(d.useRef)(0),p=Object(d.useState)([]),m=Object(s.a)(p,2),j=m[0],y=m[1],S=Object(d.useState)(!1),z=Object(s.a)(S,2),N=z[0],B=z[1],D=Object(d.useContext)(b),T=D.updateDrumCount,E=D.getDrumCount,L=Object(d.useState)(-1),H=Object(s.a)(L,2),K=H[0],U=H[1],Z=Object(A.b)().enqueueSnackbar,F=Object(d.useState)({top:0,left:0}),I=Object(s.a)(F,2),J=I[0],V=I[1],W=Object(d.useState)("sync"),X=Object(s.a)(W,2),G=X[0],Q=X[1],Y=Object(d.useState)(0),$=Object(s.a)(Y,2),_=$[0],tt=$[1],et=Object(d.useState)(!1),nt=Object(s.a)(et,2),ct=nt[0],rt=nt[1],at=Object(d.useState)(0),ot=Object(s.a)(at,2),it=ot[0],st=ot[1],ut=Object(d.useState)(0),ft=Object(s.a)(ut,2),dt=ft[0],lt=ft[1];Object(d.useEffect)((function(){function t(){return(t=Object(i.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.getActiveAccount();case 2:if(!(h=t.sent)){t.next=12;break}return Q(h.address.slice(0,6)+"..."+h.address.slice(32,36)),t.next=7,fetch("https://api.tezos.domains/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:'\n\t\t\t\t\t\t\t  {\n\t\t\t\t\t\t\t\t  reverseRecord(address: "'+h.address+'"){owner domain{name}}\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t  ',variables:{}})}).then((function(t){return t.json()})).then((function(t){console.log(t),t.data.reverseRecord&&(e=t.data.reverseRecord.domain.name,Q(e))}));case 7:rt(!0),fetch("https://api.tzkt.io/v1/accounts/"+h.address).then((function(t){return t.json()})).then((function(t){return tt(t.balance)})),fetch("https://min-api.cryptocompare.com/data/price?fsym=XTZ&tsyms=USD").then((function(t){return t.json()})).then((function(t){return st(t.USD)})),t.next=14;break;case 12:Q("sync"),rt(!1);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(d.useEffect)((function(){e.current&&(n.current=e.current)}));var pt=Object(d.useCallback)((function(){if(t.current){var e=t.current.getBoundingClientRect();V({top:e.top-e.height/2,left:e.left+e.width/2-25})}}),[t]);Object(d.useEffect)((function(){E().then((function(t){U(t)}))}),[E]),Object(d.useEffect)((function(){var t=function(){n.current&&(n.current.currentTime=0,n.current.play(),U((function(t){return t+1}))),y((function(t){return t.concat({key:Object(R.a)()})})),Z("someone beat the drum!",{variant:"default"})};return q.on("drumbeat",t),window.addEventListener("resize",pt),function(){q.off("drumbeat",t),window.removeEventListener("resize",pt)}}),[Z,pt]),Object(d.useEffect)((function(){!t.current||0!==J.top&&0!==J.left||pt()}),[t,J,pt]);var ht=Object(d.useCallback)(x.a.throttle((function(){a.current&&(T(a.current),a.current=0)}),3e3),[]);function mt(){return(mt=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.getActiveAccount();case 2:(h=t.sent)&&M.clearActiveAccount().then(Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.getActiveAccount();case 2:h=t.sent,Q("sync"),rt(!1),tt(0);case 6:case"end":return t.stop()}}),t)}))));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function bt(){return jt.apply(this,arguments)}function jt(){return(jt=Object(i.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.getActiveAccount();case 2:if(!(h=t.sent)){t.next=8;break}return console.log("Already connected:",h.address),t.abrupt("return",h);case 8:return console.log("Not connected!"),t.prev=9,console.log("Requesting permissions..."),t.next=13,M.requestPermissions();case 13:e=t.sent,console.log("Got permissions:",e.address),Q(e.address),console.log("reload"),window.location.reload(),rt(!0),fetch("https://api.tzkt.io/v1/accounts/"+e.address).then((function(t){return t.json()})).then((function(t){return tt(t.balance)})),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(9),console.log("Got error:",t.t0);case 25:case"end":return t.stop()}}),t,null,[[9,22]])})))).apply(this,arguments)}function Ot(){return gt.apply(this,arguments)}function gt(){return(gt=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"https://granadanet.api.tez.ie","KT1VGf4ZoNMWNfBTEyBbRTX6q6TgHRnZ24zp","tz1aLMj6CXkADSH9tBtRLAcigBqUaSA3sRwx","tz2KxNHVsBwmPRgMZZKJt3mYnPMcK8Smw49g",dt>0?(console.log(new P("https://granadanet.api.tez.ie").transfer("KT1VGf4ZoNMWNfBTEyBbRTX6q6TgHRnZ24zp","tz1aLMj6CXkADSH9tBtRLAcigBqUaSA3sRwx","tz2KxNHVsBwmPRgMZZKJt3mYnPMcK8Smw49g",dt)),Z("Recieved "+dt+" DRUM !",{variant:"success"}),lt(0)):Z("You have nothing to claim :(",{variant:"warning"});case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.jsxs)("div",{className:"app-container",style:{minHeight:window.innerHeight-10},children:[Object(c.jsx)("audio",{src:k,ref:e,autoPlay:!0,muted:!0}),Object(c.jsxs)("div",{className:"top-left",children:[ct&&Object(c.jsx)(O.a,{title:"unsync",onClick:function(){!function(){mt.apply(this,arguments)}()},children:"unsync "}),"|",Object(c.jsxs)(O.a,{title:"sync",onClick:Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt();case 2:case"end":return t.stop()}}),t)}))),children:[G," "]}),"|",Object(c.jsxs)(O.a,{title:"xtz balance",children:[" ",_/1e6," \ua729 "]}),"|",Object(c.jsxs)(O.a,{title:"price",children:["  \ua729 = ",it," $ "]}),"|",Object(c.jsxs)(O.a,{title:"claim",onClick:Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ot();case 2:case"end":return t.stop()}}),t)}))),children:["  Claim ",dt," DRUM  "]})]}),K>=0&&Object(c.jsx)("div",{className:"top-right",children:K}),Object(c.jsx)("img",{ref:t,onClick:function(){y((function(t){return t.concat({key:Object(R.a)()})})),B(!0),e.current&&(e.current.muted=!1,e.current.currentTime=0,e.current.play()),q.emit("drumbeat"),null!==a.current?(a.current++,ht()):a.current=0,U((function(t){return t+1})),lt((function(t){return t+1}))},alt:"drum",src:w,className:"drum"}),!N&&Object(c.jsx)("div",{children:"Click the drum!"}),Object(c.jsx)(u.a,{children:j.map((function(t){return Object(c.jsx)(f.a,{timeout:1e3,classNames:"note-transition",onEntered:function(){var e=j.findIndex((function(e){return e.key===t.key}));y([].concat(Object(r.a)(j.slice(0,e)),Object(r.a)(j.slice(e+1))))},children:Object(c.jsx)("img",{alt:"music note",src:C,className:"music-note",style:{top:J.top,left:J.left}})},t.key)}))}),Object(c.jsx)("div",{className:"adventure-logo",title:"production: leo and mike",children:Object(c.jsx)("div",{children:"Adventure Networks"})}),Object(c.jsx)("div",{className:"bottom-right",children:Object(c.jsx)(g.a,{onClick:function(){window.open("https://twitter.com/adventurecorpp")},children:Object(c.jsx)(v.a,{style:{width:50,height:50,color:"#1DA1F2"}})})})]})},K=n(38),U=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,526)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),c(t),r(t),a(t),o(t)}))};n.n(K).a.render(Object(c.jsx)(j,{children:Object(c.jsx)(A.a,{maxSnack:3,children:Object(c.jsx)(H,{})})}),document.getElementById("root")),U()}},[[492,1,2]]]);
//# sourceMappingURL=main.5c458922.chunk.js.map